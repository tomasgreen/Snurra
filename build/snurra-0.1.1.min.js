(function(){"use strict";function t(n,i){n.firstChild&&(i.appendChild(n.firstChild),t(n,i))}function n(t){(void 0===t||null===t)&&(t={});var n={};for(var i in S)n[i]=void 0!==t[i]?t[i]:S[i];return n}function i(t){var n=document.createElement("div");return n.innerHTML=t,n.firstChild}function a(t,n){s(t,function(t){t.removeAttribute(n)})}function e(t){return parseInt(t,10)}function s(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,i){n(t)}):n(t))}function o(t,n,i,a){r(t,n,function(e){l(t,n,i,a),i(e)},a)}function r(t,n,i,a){s(t,function(t){var e=n.split(" ");for(var s in e)t.addEventListener(e[s],i,a)})}function l(t,n,i,a){s(t,function(t){var e=n.split(" ");for(var s in e)t.removeEventListener(e[s],i,a)})}function p(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)}function h(t,n){if(void 0===t.ontouchstart)return void r(t,"click",n);var i=!1;r(t,"touchstart",function(t){i=!0}),r(t,"touchend",function(t){i&&(n(t),p(t))}),r(t,"touchcancel touchleave touchmove",function(t){i=!1})}function d(t,n){l(t,"touchstart touchend touchcancel click",n)}function u(t,n){s(t,function(t){if(t.classList){var i=n.split(" ");for(var a in i)t.classList.add(i[a])}else t.className+=" "+n})}function c(t,n){s(t,function(t){if(t.classList){var i=n.split(" ");for(var a in i)t.classList.remove(i[a])}else t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")})}function m(t,n,i){return void 0===i&&t&&void 0!==t.getAttribute?t.getAttribute(n):void s(t,function(t){t.setAttribute(n,i)})}function f(t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(t){4==i.readyState&&200==i.status&&n(i.responseText)},i.open("GET",t),i.overrideMimeType("text/plain"),i.send()}function y(t){return"string"==typeof t}var v="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend",w='<svg id="loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><style>@-webkit-keyframes animSpin { 0% {opacity: 1;} 100% {opacity: 0.1;} }@keyframes animSpin { 0% {opacity: 1;} 100% {opacity: 0.1;} }.animSpin {-webkit-animation-name: animSpin;-webkit-animation-iteration-count: infinite;-webkit-animation-duration: 1s;animation-name: animSpin;animation-iteration-count: infinite;animation-duration: 1s;opacity: 0.1;}</style><path d="M15 0 H17 V8 H15 z" transform="rotate(0 16 16)" class="animSpin" style="-webkit-animation-delay: 0s; animation-delay: 0s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(22.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.0625s; animation-delay: 0.0625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(45 16 16)" class="animSpin" style="-webkit-animation-delay: 0.125s; animation-delay: 0.125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(67.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.1875s; animation-delay: 0.1875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(90 16 16)" class="animSpin" style="-webkit-animation-delay: 0.25s; animation-delay: 0.25s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(112.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.3125s; animation-delay: 0.3125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(135 16 16)" class="animSpin" style="-webkit-animation-delay: 0.375s; animation-delay: 0.375s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(157.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.4375s; animation-delay: 0.4375s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(180 16 16)" class="animSpin" style="-webkit-animation-delay: 0.5s; animation-delay: 0.5s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(202.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.5625s; animation-delay: 0.5625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(225 16 16)" class="animSpin" style="-webkit-animation-delay: 0.625s; animation-delay: 0.625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(247.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.6875s; animation-delay: 0.6875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(270 16 16)" class="animSpin" style="-webkit-animation-delay: 0.75s; animation-delay: 0.75s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(292.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.8125s; animation-delay: 0.8125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(315 16 16)" class="animSpin" style="-webkit-animation-delay: 0.875s; animation-delay: 0.875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(337.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.9375s; animation-delay: 0.9375s"></path></svg>',E={"default":w},S={autoStart:!0,maxSize:24,autoStartOnTap:null,onTap:null,spinner:"default"},b=function(t,i){y(t)&&(t=document.querySelector(t)),t&&(this.opt=n(i),this.el=t,this.opt.onTap&&(this.opt.autoStart=!1,this.tapOn(this.opt.onTap)),this.eventListeners=[],this.opt.autoStart&&this.start())};b.prototype.start=function(){if(!m(this.el,"data-spinning")){u(this.el,"snurra"),this.textEl=document.createElement("div"),t(this.el,this.textEl),this.spinnerEl=i(E[this.opt.spinner]?E[this.opt.spinner]:E["default"]),u(this.textEl,"snurra-text"),u(this.spinnerEl,"snurra-img"),this.el.appendChild(this.textEl),this.el.appendChild(this.spinnerEl);var n=this.el.clientHeight-6;n>this.opt.maxSize&&(n=this.opt.maxSize),m(this.el,"data-spinning",!0),m(this.spinnerEl,"height",n),m(this.spinnerEl,"width",n),this.spinnerEl.style.marginLeft="-"+e(n/2)+"px",this.spinnerEl.style.marginTop="-"+e(n/2)+"px",m(this.el,"disabled","true"),u(this.textEl,"snurra-text-fadeout"),u(this.spinnerEl,"snurra-img-fadein")}},b.prototype.stop=function(n){m(this.el,"data-spinning")&&(a(this.el,"disabled"),a(this.el,"data-spinning"),c(this.textEl,"snurra-text-fadeout"),c(this.spinnerEl,"snurra-img-fadein"),u(this.textEl,"snurra-text-fadein"),u(this.spinnerEl,"snurra-img-fadeout"),o(this.textEl,v,function(i){t(this.textEl,this.el),this.el.removeChild(this.textEl),this.el.removeChild(this.spinnerEl),c(this.el,"snurra"),n&&n(this)}.bind(this)))},b.prototype.destroy=function(t){this.stop(t);for(var n in this.eventListeners){var i=this.eventListeners[n];this.off(i.e,i.c,i.u)}this.onTapEvent&&this.tapOff()},b.prototype.pushEvent=function(t,n,i){this.eventListeners.push({e:t,c:n,u:i})},b.prototype.on=function(t,n,i){this.pushEvent.push(t,n,i),r(this.el,t,n,i)},b.prototype.one=function(t,n,i){this.pushEvent.push(t,n,i),o(this.el,t,n,i)},b.prototype.onTap=function(t){this.opt.onTap=t,this.onTapEvent&&this.tapOff(),this.opt.autoStartOnTap!==!1&&(this.opt.autoStartOnTap=!0),this.onTapEvent=function(t){this.opt.autoStartOnTap&&this.start(),this.opt.onTap(t)},h(this.el,this.onTapEvent.bind(this))},b.prototype.tapOff=function(){d(this.el,this.onTapEvent)},b.prototype.off=function(t,n,i){l(this.el,t,n,i)};var H=this;H.Snurra=function(t,n){var i=new b(t,n);return i},H.Snurra.globals=S,H.Snurra.addSpinner=function(t,n){E[t]||f(t,function(i){i?(E[t]=i,n&&(H.Snurra.globals.spinner=t)):console.log('could not download spinner "'+t+'"')})}}).call(this);