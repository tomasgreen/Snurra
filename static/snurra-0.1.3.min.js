(function(){"use strict";function t(i,n){i.firstChild&&(n.appendChild(i.firstChild),t(i,n))}function i(t){void 0!==t&&null!==t||(t={});var i={};for(var n in v)i[n]=void 0!==t[n]?t[n]:v[n];return i}function n(t){var i=document.createElement("div");return i.innerHTML=t,i.firstChild}function a(t,i){s(t,function(t){t.removeAttribute(i)})}function e(t){return parseInt(t,10)}function s(t,i){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,n){i(t)}):i(t))}function o(t,i,n,a){var e=function(s){l(t,i,e,a),n(s)};r(t,i,e,a)}function r(t,i,n,a){void 0===a&&(a=!1),s(t,function(t){var e=i.split(" ");for(var s in e)t.addEventListener(e[s],n,a)})}function l(t,i,n,a){void 0===a&&(a=!1),s(t,function(t){var e=i.split(" ");for(var s in e)t.removeEventListener(e[s],n,a)})}function p(t,i){s(t,function(t){if(t.classList){var n=i.split(" ");for(var a in n)t.classList.add(n[a])}else t.className+=" "+i})}function h(t,i){s(t,function(t){if(t.classList){var n=i.split(" ");for(var a in n)t.classList.remove(n[a])}else t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")})}function d(t,i,n){return void 0===n&&t&&void 0!==t.getAttribute?t.getAttribute(i):void s(t,function(t){t.setAttribute(i,n)})}function c(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(t){4==n.readyState&&200==n.status&&i(n.responseText)},n.open("GET",t),n.overrideMimeType("text/plain"),n.send()}function m(t){return"string"==typeof t}var u="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend",f='<svg id="loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><style>@-webkit-keyframes animSpin { 0% {opacity: 1;} 100% {opacity: 0.1;} }@keyframes animSpin { 0% {opacity: 1;} 100% {opacity: 0.1;} }.animSpin {-webkit-animation-name: animSpin;-webkit-animation-iteration-count: infinite;-webkit-animation-duration: 1s;animation-name: animSpin;animation-iteration-count: infinite;animation-duration: 1s;opacity: 0.1;}</style><path d="M15 0 H17 V8 H15 z" transform="rotate(0 16 16)" class="animSpin" style="-webkit-animation-delay: 0s; animation-delay: 0s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(22.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.0625s; animation-delay: 0.0625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(45 16 16)" class="animSpin" style="-webkit-animation-delay: 0.125s; animation-delay: 0.125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(67.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.1875s; animation-delay: 0.1875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(90 16 16)" class="animSpin" style="-webkit-animation-delay: 0.25s; animation-delay: 0.25s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(112.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.3125s; animation-delay: 0.3125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(135 16 16)" class="animSpin" style="-webkit-animation-delay: 0.375s; animation-delay: 0.375s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(157.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.4375s; animation-delay: 0.4375s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(180 16 16)" class="animSpin" style="-webkit-animation-delay: 0.5s; animation-delay: 0.5s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(202.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.5625s; animation-delay: 0.5625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(225 16 16)" class="animSpin" style="-webkit-animation-delay: 0.625s; animation-delay: 0.625s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(247.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.6875s; animation-delay: 0.6875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(270 16 16)" class="animSpin" style="-webkit-animation-delay: 0.75s; animation-delay: 0.75s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(292.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.8125s; animation-delay: 0.8125s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(315 16 16)" class="animSpin" style="-webkit-animation-delay: 0.875s; animation-delay: 0.875s"></path><path d="M15 0 H17 V8 H15 z" transform="rotate(337.5 16 16)" class="animSpin" style="-webkit-animation-delay: 0.9375s; animation-delay: 0.9375s"></path></svg>',y={default:f},v={autoStart:!0,maxSize:24,autoStartOnClick:null,onClick:null,spinner:"default"},w=function(t,n){m(t)&&(t=document.querySelector(t)),t&&(this.opt=i(n),this.el=t,this.opt.onClick&&(this.opt.autoStart=!1,this.onClick(this.opt.onClick)),this.eventListeners=[],this.opt.autoStart&&this.start())};w.prototype.start=function(){if(!d(this.el,"data-spinning")){var i=n(y[this.opt.spinner]?y[this.opt.spinner]:y.default);p(this.el,"snurra"),this.textEl=document.createElement("div"),t(this.el,this.textEl),this.wrapperEl=document.createElement("div"),this.wrapperEl.appendChild(i),p(this.textEl,"snurra-text"),p(this.wrapperEl,"snurra-img"),this.el.appendChild(this.textEl),this.el.appendChild(this.wrapperEl);var a=this.el.clientHeight-6;a>this.opt.maxSize&&(a=this.opt.maxSize),d(this.el,"data-spinning",!0),d(i,"height",a),d(i,"width",a),this.wrapperEl.style.width=a+"px",this.wrapperEl.style.height=a+"px",this.wrapperEl.style.marginLeft="-"+e(a/2)+"px",this.wrapperEl.style.marginTop="-"+e(a/2)+"px",d(this.el,"disabled","true"),p(this.textEl,"snurra-text-fadeout"),p(this.wrapperEl,"snurra-img-fadein")}},w.prototype.stop=function(i){d(this.el,"data-spinning")&&(a(this.el,"disabled"),a(this.el,"data-spinning"),h(this.textEl,"snurra-text-fadeout"),h(this.wrapperEl,"snurra-img-fadein"),p(this.textEl,"snurra-text-fadein"),p(this.wrapperEl,"snurra-img-fadeout"),o(this.textEl,u,function(n){t(this.textEl,this.el),this.el.removeChild(this.textEl),this.el.removeChild(this.wrapperEl),h(this.el,"snurra"),i&&i(this)}.bind(this)))},w.prototype.disable=function(){d(this.el,"disabled","true")},w.prototype.enable=function(){d(this.el,"data-spinning")?this.stop():a(this.el,"disabled")},w.prototype.destroy=function(t){this.stop(t);for(var i in this.eventListeners){var n=this.eventListeners[i];this.off(n.e,n.c,n.u)}this.onClickEvent&&this.offClick()},w.prototype.pushEvent=function(t,i,n){this.eventListeners.push({e:t,c:i,u:n})},w.prototype.on=function(t,i,n){this.pushEvent.push(t,i,n),r(this.el,t,i,n)},w.prototype.one=function(t,i,n){this.pushEvent.push(t,i,n),o(this.el,t,i,n)},w.prototype.onClick=function(t){this.opt.onClick=t,this.onClickEvent&&this.offClick(),this.opt.autoStartOnClick!==!1&&(this.opt.autoStartOnClick=!0),this.onClickEvent=function(t){this.opt.autoStartOnClick&&this.start(),this.opt.onClick(t)},r(this.el,"click",this.onClickEvent.bind(this))},w.prototype.offClick=function(){l(this.el,"click",this.onClickEvent)},w.prototype.off=function(t,i,n){l(this.el,t,i,n)};var k=this;k.Snurra=function(t,i){var n=new w(t,i);return n},k.Snurra.globals=v,k.Snurra.addStringSpinner=function(t,i,n){y[t]||(y[url]=i,n&&(k.Snurra.globals.spinner=t))},k.Snurra.addSpinner=function(t,i){y[t]||c(t,function(n){n?(y[t]=n,i&&(k.Snurra.globals.spinner=t)):console.log('could not download spinner "'+t+'"')})}}).call(this);